.LanguageSwitcher {
	position: relative;
	display: inline-block;
	z-index: 1000;
}

.trigger {
	display: flex;
	align-items: center;
	gap: 0.75rem;
	padding: 0.75rem 1rem;
	background: linear-gradient(135deg, #2a2a2a 0%, #1e1e1e 100%);
	border: 1px solid #404040;
	border-radius: 12px;
	color: #e5e5e5;
	font-size: 0.875rem;
	font-weight: 500;
	cursor: pointer;
	transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
	box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1),
		0 2px 4px -1px rgba(0, 0, 0, 0.06);
	min-width: 140px;
	position: relative;
	overflow: hidden;

	&::before {
		content: '';
		position: absolute;
		top: 0;
		left: 0;
		right: 0;
		bottom: 0;
		background: linear-gradient(
			135deg,
			rgba(255, 255, 255, 0.1) 0%,
			rgba(255, 255, 255, 0.05) 100%
		);
		opacity: 0;
		transition: opacity 0.3s ease;
	}

	&:hover {
		border-color: #606060;
		background: linear-gradient(135deg, #333333 0%, #262626 100%);
		box-shadow: 0 8px 25px -5px rgba(0, 0, 0, 0.2),
			0 8px 10px -6px rgba(0, 0, 0, 0.1);
		transform: translateY(-2px);

		&::before {
			opacity: 1;
		}
	}

	&:focus,
	&.open {
		outline: none;
		border-color: #4f9eff;
		box-shadow: 0 0 0 3px rgba(79, 158, 255, 0.1),
			0 10px 30px -10px rgba(0, 0, 0, 0.3);
		background: linear-gradient(135deg, #333333 0%, #262626 100%);

		&::before {
			opacity: 1;
		}
	}

	&:active {
		transform: translateY(0);
	}
}

.flag {
	font-size: 1.125rem;
	display: flex;
	align-items: center;
}

.label {
	flex: 1;
	text-align: left;
	white-space: nowrap;
}

.arrow {
	color: #9ca3af;
	transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
	display: flex;
	align-items: center;
	justify-content: center;

	&.rotated {
		transform: rotate(180deg);
		color: #4f9eff;
	}
}

.trigger:hover .arrow {
	color: #d1d5db;
}

.dropdown {
	position: absolute;
	top: calc(100% + 8px);
	left: 0;
	right: 0;
	background: linear-gradient(135deg, #2a2a2a 0%, #1e1e1e 100%);
	border: 1px solid #404040;
	border-radius: 12px;
	box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.3),
		0 10px 10px -5px rgba(0, 0, 0, 0.2);
	opacity: 0;
	visibility: hidden;
	transform: translateY(-10px) scale(0.95);
	transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
	backdrop-filter: blur(10px);
	z-index: 50;

	&.visible {
		opacity: 1;
		visibility: visible;
		transform: translateY(0) scale(1);
	}

	&::before {
		content: '';
		position: absolute;
		top: -6px;
		left: 20px;
		width: 12px;
		height: 12px;
		background: linear-gradient(135deg, #2a2a2a 0%, #1e1e1e 100%);
		border-left: 1px solid #404040;
		border-top: 1px solid #404040;
		transform: rotate(45deg);
		z-index: -1;
	}
}

.options {
	padding: 0.5rem;
	max-height: 200px;
	overflow-y: auto;

	&::-webkit-scrollbar {
		width: 6px;
	}

	&::-webkit-scrollbar-track {
		background: rgba(255, 255, 255, 0.05);
		border-radius: 3px;
	}

	&::-webkit-scrollbar-thumb {
		background: rgba(255, 255, 255, 0.2);
		border-radius: 3px;

		&:hover {
			background: rgba(255, 255, 255, 0.3);
		}
	}
}

.option {
	display: flex;
	align-items: center;
	gap: 0.75rem;
	width: 100%;
	padding: 0.75rem;
	background: transparent;
	border: none;
	border-radius: 8px;
	color: #e5e5e5;
	font-size: 0.875rem;
	font-weight: 500;
	cursor: pointer;
	transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
	position: relative;
	overflow: hidden;

	&::before {
		content: '';
		position: absolute;
		top: 0;
		left: 0;
		right: 0;
		bottom: 0;
		background: linear-gradient(
			90deg,
			transparent 0%,
			rgba(79, 158, 255, 0.1) 50%,
			transparent 100%
		);
		transform: translateX(-100%);
		transition: transform 0.6s ease;
	}

	&:hover {
		background: rgba(255, 255, 255, 0.05);
		color: #ffffff;
		transform: translateX(4px);

		&::before {
			transform: translateX(100%);
		}
	}

	&:active {
		transform: translateX(2px) scale(0.98);
	}

	&.active {
		background: linear-gradient(
			135deg,
			rgba(79, 158, 255, 0.15) 0%,
			rgba(79, 158, 255, 0.1) 100%
		);
		color: #4f9eff;

		&:hover {
			background: linear-gradient(
				135deg,
				rgba(79, 158, 255, 0.2) 0%,
				rgba(79, 158, 255, 0.15) 100%
			);
		}
	}
}

.optionLabel {
	flex: 1;
	text-align: left;
	white-space: nowrap;
}

.checkmark {
	color: #4f9eff;
	display: flex;
	align-items: center;
	justify-content: center;
	animation: checkmarkAppear 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

@keyframes checkmarkAppear {
	0% {
		opacity: 0;
		transform: scale(0.5) rotate(-90deg);
	}
	50% {
		transform: scale(1.2) rotate(0deg);
	}
	100% {
		opacity: 1;
		transform: scale(1) rotate(0deg);
	}
}

// Дополнительные анимации при открытии
.visible .option {
	animation: optionSlideIn 0.4s cubic-bezier(0.4, 0, 0.2, 1);
	animation-fill-mode: both;

	@for $i from 1 through 10 {
		&:nth-child(#{$i}) {
			animation-delay: #{$i * 0.05}s;
		}
	}
}

@keyframes optionSlideIn {
	0% {
		opacity: 0;
		transform: translateX(-20px);
	}
	100% {
		opacity: 1;
		transform: translateX(0);
	}
}

// Адаптивность для мобильных устройств
@media (max-width: 768px) {
	.trigger {
		min-width: 120px;
		padding: 0.625rem 0.75rem;
		gap: 0.5rem;
	}

	.flag {
		font-size: 1rem;
	}

	.label {
		font-size: 0.8rem;
	}

	.arrow svg {
		width: 10px;
		height: 10px;
	}

	.dropdown {
		top: calc(100% + 4px);
	}

	.option {
		padding: 0.625rem;
		gap: 0.5rem;
	}

	.optionLabel {
		font-size: 0.8rem;
	}
}

// Улучшенная поддержка темной темы
@media (prefers-color-scheme: dark) {
	.trigger {
		background: linear-gradient(135deg, #1a1a1a 0%, #0f0f0f 100%);
		border-color: #333333;
		color: #f5f5f5;

		&:hover,
		&:focus,
		&.open {
			background: linear-gradient(135deg, #262626 0%, #1a1a1a 100%);
			border-color: #505050;
		}

		&:focus,
		&.open {
			border-color: #60a5fa;
			box-shadow: 0 0 0 3px rgba(96, 165, 250, 0.1),
				0 10px 30px -10px rgba(0, 0, 0, 0.4);
		}
	}

	.dropdown {
		background: linear-gradient(135deg, #1a1a1a 0%, #0f0f0f 100%);
		border-color: #333333;

		&::before {
			background: linear-gradient(135deg, #1a1a1a 0%, #0f0f0f 100%);
			border-color: #333333;
		}
	}

	.option {
		color: #f5f5f5;

		&:hover {
			background: rgba(255, 255, 255, 0.08);
			color: #ffffff;
		}

		&.active {
			background: linear-gradient(
				135deg,
				rgba(96, 165, 250, 0.15) 0%,
				rgba(96, 165, 250, 0.1) 100%
			);
			color: #60a5fa;

			&:hover {
				background: linear-gradient(
					135deg,
					rgba(96, 165, 250, 0.2) 0%,
					rgba(96, 165, 250, 0.15) 100%
				);
			}
		}
	}

	.checkmark {
		color: #60a5fa;
	}

	.arrow.rotated {
		color: #60a5fa;
	}
}
